"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/admin/setup";
exports.ids = ["pages/api/admin/setup"];
exports.modules = {

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "nodemailer":
/*!*****************************!*\
  !*** external "nodemailer" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("nodemailer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fsetup&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Csetup.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fsetup&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Csetup.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_admin_setup_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\admin\\setup.js */ \"(api)/./pages/api/admin/setup.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_setup_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_setup_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/admin/setup\",\n        pathname: \"/api/admin/setup\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_admin_setup_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFkbWluJTJGc2V0dXAmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2FkbWluJTVDc2V0dXAuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDMEQ7QUFDMUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHNEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxzREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZWNyZXQtc2FudGEvP2UxNGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxhZG1pblxcXFxzZXR1cC5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FkbWluL3NldHVwXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWRtaW4vc2V0dXBcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fsetup&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Csetup.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/storage.js":
/*!************************!*\
  !*** ./lib/storage.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   loadData: () => (/* binding */ loadData),\n/* harmony export */   saveData: () => (/* binding */ saveData)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n// storage.js\n// Smart storage that works on both local and serverless environments\n\n\nconst DATA_FILE = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"data.json\");\n// In-memory storage for serverless environments (Vercel)\nlet memoryData = null;\nfunction isServerless() {\n    // Detect if we're running in a serverless environment\n    return process.env.VERCEL || process.env.AWS_LAMBDA_FUNCTION_NAME || process.env.FUNCTION_NAME;\n}\nasync function loadData() {\n    // If serverless, use memory storage\n    if (isServerless()) {\n        if (memoryData) {\n            console.log(\"Loading data from memory (serverless mode)\");\n            return memoryData;\n        }\n        console.log(\"No data in memory, returning default (serverless mode)\");\n        return {\n            participants: {},\n            assignments: {},\n            revealed: {}\n        };\n    }\n    // Local development: use file storage\n    try {\n        if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(DATA_FILE)) {\n            const content = fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(DATA_FILE, \"utf8\");\n            console.log(\"Loading data from file (local mode)\");\n            return JSON.parse(content);\n        }\n    } catch (error) {\n        console.warn(\"Error loading data.json, using default:\", error.message);\n    }\n    console.log(\"No file found, returning default (local mode)\");\n    return {\n        participants: {},\n        assignments: {},\n        revealed: {}\n    };\n}\nasync function saveData(data) {\n    // If serverless, use memory storage\n    if (isServerless()) {\n        memoryData = {\n            ...data\n        }; // Store a copy in memory\n        console.log(\"Data saved to memory (serverless mode)\");\n        return true;\n    }\n    // Local development: use file storage\n    try {\n        const dir = path__WEBPACK_IMPORTED_MODULE_1___default().dirname(DATA_FILE);\n        if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(dir)) {\n            fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(dir, {\n                recursive: true\n            });\n        }\n        fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(DATA_FILE, JSON.stringify(data, null, 2), \"utf8\");\n        console.log(\"Data saved to file (local mode)\");\n        return true;\n    } catch (error) {\n        console.error(\"Error saving data.json:\", error.message);\n        throw new Error(`Failed to save data: ${error.message}`);\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    loadData,\n    saveData\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc3RvcmFnZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsYUFBYTtBQUNiLHFFQUFxRTtBQUNqRDtBQUNJO0FBRXhCLE1BQU1FLFlBQVlELGdEQUFTLENBQUNHLFFBQVFDLEdBQUcsSUFBSTtBQUUzQyx5REFBeUQ7QUFDekQsSUFBSUMsYUFBYTtBQUVqQixTQUFTQztJQUNQLHNEQUFzRDtJQUN0RCxPQUFPSCxRQUFRSSxHQUFHLENBQUNDLE1BQU0sSUFBSUwsUUFBUUksR0FBRyxDQUFDRSx3QkFBd0IsSUFBSU4sUUFBUUksR0FBRyxDQUFDRyxhQUFhO0FBQ2hHO0FBRU8sZUFBZUM7SUFDcEIsb0NBQW9DO0lBQ3BDLElBQUlMLGdCQUFnQjtRQUNsQixJQUFJRCxZQUFZO1lBQ2RPLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9SO1FBQ1Q7UUFDQU8sUUFBUUMsR0FBRyxDQUFDO1FBQ1osT0FBTztZQUFFQyxjQUFjLENBQUM7WUFBR0MsYUFBYSxDQUFDO1lBQUdDLFVBQVUsQ0FBQztRQUFFO0lBQzNEO0lBRUEsc0NBQXNDO0lBQ3RDLElBQUk7UUFDRixJQUFJakIsb0RBQWEsQ0FBQ0UsWUFBWTtZQUM1QixNQUFNaUIsVUFBVW5CLHNEQUFlLENBQUNFLFdBQVc7WUFDM0NXLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9PLEtBQUtDLEtBQUssQ0FBQ0g7UUFDcEI7SUFDRixFQUFFLE9BQU9JLE9BQU87UUFDZFYsUUFBUVcsSUFBSSxDQUFDLDJDQUEyQ0QsTUFBTUUsT0FBTztJQUN2RTtJQUVBWixRQUFRQyxHQUFHLENBQUM7SUFDWixPQUFPO1FBQUVDLGNBQWMsQ0FBQztRQUFHQyxhQUFhLENBQUM7UUFBR0MsVUFBVSxDQUFDO0lBQUU7QUFDM0Q7QUFFTyxlQUFlUyxTQUFTQyxJQUFJO0lBQ2pDLG9DQUFvQztJQUNwQyxJQUFJcEIsZ0JBQWdCO1FBQ2xCRCxhQUFhO1lBQUUsR0FBR3FCLElBQUk7UUFBQyxHQUFHLHlCQUF5QjtRQUNuRGQsUUFBUUMsR0FBRyxDQUFDO1FBQ1osT0FBTztJQUNUO0lBRUEsc0NBQXNDO0lBQ3RDLElBQUk7UUFDRixNQUFNYyxNQUFNM0IsbURBQVksQ0FBQ0M7UUFDekIsSUFBSSxDQUFDRixvREFBYSxDQUFDNEIsTUFBTTtZQUN2QjVCLG1EQUFZLENBQUM0QixLQUFLO2dCQUFFRyxXQUFXO1lBQUs7UUFDdEM7UUFFQS9CLHVEQUFnQixDQUFDRSxXQUFXbUIsS0FBS1ksU0FBUyxDQUFDTixNQUFNLE1BQU0sSUFBSTtRQUMzRGQsUUFBUUMsR0FBRyxDQUFDO1FBQ1osT0FBTztJQUNULEVBQUUsT0FBT1MsT0FBTztRQUNkVixRQUFRVSxLQUFLLENBQUMsMkJBQTJCQSxNQUFNRSxPQUFPO1FBQ3RELE1BQU0sSUFBSVMsTUFBTSxDQUFDLHFCQUFxQixFQUFFWCxNQUFNRSxPQUFPLENBQUMsQ0FBQztJQUN6RDtBQUNGO0FBRUEsaUVBQWU7SUFBRWI7SUFBVWM7QUFBUyxDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZWNyZXQtc2FudGEvLi9saWIvc3RvcmFnZS5qcz9jODYxIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHN0b3JhZ2UuanNcclxuLy8gU21hcnQgc3RvcmFnZSB0aGF0IHdvcmtzIG9uIGJvdGggbG9jYWwgYW5kIHNlcnZlcmxlc3MgZW52aXJvbm1lbnRzXHJcbmltcG9ydCBmcyBmcm9tICdmcyc7XHJcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xyXG5cclxuY29uc3QgREFUQV9GSUxFID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdkYXRhLmpzb24nKTtcclxuXHJcbi8vIEluLW1lbW9yeSBzdG9yYWdlIGZvciBzZXJ2ZXJsZXNzIGVudmlyb25tZW50cyAoVmVyY2VsKVxyXG5sZXQgbWVtb3J5RGF0YSA9IG51bGw7XHJcblxyXG5mdW5jdGlvbiBpc1NlcnZlcmxlc3MoKSB7XHJcbiAgLy8gRGV0ZWN0IGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSBzZXJ2ZXJsZXNzIGVudmlyb25tZW50XHJcbiAgcmV0dXJuIHByb2Nlc3MuZW52LlZFUkNFTCB8fCBwcm9jZXNzLmVudi5BV1NfTEFNQkRBX0ZVTkNUSU9OX05BTUUgfHwgcHJvY2Vzcy5lbnYuRlVOQ1RJT05fTkFNRTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWREYXRhKCkge1xyXG4gIC8vIElmIHNlcnZlcmxlc3MsIHVzZSBtZW1vcnkgc3RvcmFnZVxyXG4gIGlmIChpc1NlcnZlcmxlc3MoKSkge1xyXG4gICAgaWYgKG1lbW9yeURhdGEpIHtcclxuICAgICAgY29uc29sZS5sb2coJ0xvYWRpbmcgZGF0YSBmcm9tIG1lbW9yeSAoc2VydmVybGVzcyBtb2RlKScpO1xyXG4gICAgICByZXR1cm4gbWVtb3J5RGF0YTtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKCdObyBkYXRhIGluIG1lbW9yeSwgcmV0dXJuaW5nIGRlZmF1bHQgKHNlcnZlcmxlc3MgbW9kZSknKTtcclxuICAgIHJldHVybiB7IHBhcnRpY2lwYW50czoge30sIGFzc2lnbm1lbnRzOiB7fSwgcmV2ZWFsZWQ6IHt9IH07XHJcbiAgfVxyXG5cclxuICAvLyBMb2NhbCBkZXZlbG9wbWVudDogdXNlIGZpbGUgc3RvcmFnZVxyXG4gIHRyeSB7XHJcbiAgICBpZiAoZnMuZXhpc3RzU3luYyhEQVRBX0ZJTEUpKSB7XHJcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMoREFUQV9GSUxFLCAndXRmOCcpO1xyXG4gICAgICBjb25zb2xlLmxvZygnTG9hZGluZyBkYXRhIGZyb20gZmlsZSAobG9jYWwgbW9kZSknKTtcclxuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoY29udGVudCk7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUud2FybignRXJyb3IgbG9hZGluZyBkYXRhLmpzb24sIHVzaW5nIGRlZmF1bHQ6JywgZXJyb3IubWVzc2FnZSk7XHJcbiAgfVxyXG4gIFxyXG4gIGNvbnNvbGUubG9nKCdObyBmaWxlIGZvdW5kLCByZXR1cm5pbmcgZGVmYXVsdCAobG9jYWwgbW9kZSknKTtcclxuICByZXR1cm4geyBwYXJ0aWNpcGFudHM6IHt9LCBhc3NpZ25tZW50czoge30sIHJldmVhbGVkOiB7fSB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZURhdGEoZGF0YSkge1xyXG4gIC8vIElmIHNlcnZlcmxlc3MsIHVzZSBtZW1vcnkgc3RvcmFnZVxyXG4gIGlmIChpc1NlcnZlcmxlc3MoKSkge1xyXG4gICAgbWVtb3J5RGF0YSA9IHsgLi4uZGF0YSB9OyAvLyBTdG9yZSBhIGNvcHkgaW4gbWVtb3J5XHJcbiAgICBjb25zb2xlLmxvZygnRGF0YSBzYXZlZCB0byBtZW1vcnkgKHNlcnZlcmxlc3MgbW9kZSknKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgLy8gTG9jYWwgZGV2ZWxvcG1lbnQ6IHVzZSBmaWxlIHN0b3JhZ2VcclxuICB0cnkge1xyXG4gICAgY29uc3QgZGlyID0gcGF0aC5kaXJuYW1lKERBVEFfRklMRSk7XHJcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZGlyKSkge1xyXG4gICAgICBmcy5ta2RpclN5bmMoZGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZnMud3JpdGVGaWxlU3luYyhEQVRBX0ZJTEUsIEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpLCAndXRmOCcpO1xyXG4gICAgY29uc29sZS5sb2coJ0RhdGEgc2F2ZWQgdG8gZmlsZSAobG9jYWwgbW9kZSknKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgZGF0YS5qc29uOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gc2F2ZSBkYXRhOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7IGxvYWREYXRhLCBzYXZlRGF0YSB9O1xyXG4iXSwibmFtZXMiOlsiZnMiLCJwYXRoIiwiREFUQV9GSUxFIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJtZW1vcnlEYXRhIiwiaXNTZXJ2ZXJsZXNzIiwiZW52IiwiVkVSQ0VMIiwiQVdTX0xBTUJEQV9GVU5DVElPTl9OQU1FIiwiRlVOQ1RJT05fTkFNRSIsImxvYWREYXRhIiwiY29uc29sZSIsImxvZyIsInBhcnRpY2lwYW50cyIsImFzc2lnbm1lbnRzIiwicmV2ZWFsZWQiLCJleGlzdHNTeW5jIiwiY29udGVudCIsInJlYWRGaWxlU3luYyIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwid2FybiIsIm1lc3NhZ2UiLCJzYXZlRGF0YSIsImRhdGEiLCJkaXIiLCJkaXJuYW1lIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwid3JpdGVGaWxlU3luYyIsInN0cmluZ2lmeSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/storage.js\n");

/***/ }),

/***/ "(api)/./pages/api/admin/setup.js":
/*!**********************************!*\
  !*** ./pages/api/admin/setup.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/storage */ \"(api)/./lib/storage.js\");\n\n\nconst nodemailer = __webpack_require__(/*! nodemailer */ \"nodemailer\");\n// Load environment variables for local development\nif (true) {\n    (__webpack_require__(/*! dotenv */ \"dotenv\").config)();\n}\nfunction generateToken() {\n    return crypto__WEBPACK_IMPORTED_MODULE_0___default().randomBytes(32).toString(\"hex\");\n}\nfunction performDraw(participants) {\n    const names = Object.keys(participants);\n    if (names.length < 2) throw new Error(\"Need at least 2 participants\");\n    let attempts = 0;\n    const maxAttempts = 1000;\n    while(attempts < maxAttempts){\n        const assignments = {};\n        const available = [\n            ...names\n        ];\n        let valid = true;\n        for (const giver of names){\n            const possible = available.filter((r)=>r !== giver);\n            if (possible.length === 0) {\n                valid = false;\n                break;\n            }\n            const recipient = possible[Math.floor(Math.random() * possible.length)];\n            assignments[giver] = recipient;\n            available.splice(available.indexOf(recipient), 1);\n        }\n        if (valid) return assignments;\n        attempts++;\n    }\n    throw new Error(\"Could not generate valid assignments\");\n}\nfunction createTransporter() {\n    // Debug environment variables\n    console.log(\"Email config:\", {\n        host: process.env.EMAIL_HOST || \"smtp.gmail.com\",\n        port: process.env.EMAIL_PORT || \"587\",\n        user: process.env.EMAIL_USER ? \"***@\" + process.env.EMAIL_USER.split(\"@\")[1] : \"undefined\",\n        pass: process.env.EMAIL_PASS ? \"configured\" : \"missing\"\n    });\n    const config = {\n        host: process.env.EMAIL_HOST || \"smtp.gmail.com\",\n        port: parseInt(process.env.EMAIL_PORT) || 587,\n        secure: false,\n        auth: {\n            user: process.env.EMAIL_USER,\n            pass: process.env.EMAIL_PASS\n        },\n        tls: {\n            rejectUnauthorized: false\n        },\n        connectionTimeout: 60000,\n        greetingTimeout: 30000,\n        socketTimeout: 60000\n    };\n    return nodemailer.createTransporter(config);\n}\nasync function handler(req, res) {\n    if (req.method !== \"POST\") return res.status(405).json({\n        error: \"Method not allowed\"\n    });\n    const { participants } = req.body;\n    if (!participants || participants.length < 2) return res.status(400).json({\n        error: \"Need at least 2 participants\"\n    });\n    try {\n        const participantMap = {};\n        participants.forEach((p)=>{\n            const token = generateToken();\n            participantMap[p.name] = {\n                email: p.email,\n                token\n            };\n        });\n        const assignments = performDraw(participantMap);\n        const data = {\n            participants: participantMap,\n            assignments,\n            revealed: {}\n        };\n        await (0,_lib_storage__WEBPACK_IMPORTED_MODULE_1__.saveData)(data);\n        // send emails\n        const transporter = createTransporter();\n        const appUrl = process.env.APP_URL || \"\";\n        const promises = Object.keys(participantMap).map((name)=>{\n            const p = participantMap[name];\n            const revealUrl = `${appUrl}/reveal?token=${p.token}`;\n            const mail = {\n                from: process.env.EMAIL_USER,\n                to: p.email,\n                subject: \"\\uD83C\\uDF85 Your Secret Santa Assignment\",\n                html: `<p>Hi <strong>${name}</strong>,</p><p>Click <a href=\"${revealUrl}\">this link</a> to reveal your Secret Santa.</p>`\n            };\n            return transporter.sendMail(mail);\n        });\n        await Promise.all(promises);\n        return res.json({\n            success: true,\n            message: `Secret Santa set up and emails sent (${participants.length})`\n        });\n    } catch (err) {\n        console.error(\"setup error\", err);\n        return res.status(500).json({\n            error: err.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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IndlYnBhY2s6Ly9zZWNyZXQtc2FudGEvLi9wYWdlcy9hcGkvYWRtaW4vc2V0dXAuanM/YWNlOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0byc7XHJcbmltcG9ydCB7IGxvYWREYXRhLCBzYXZlRGF0YSB9IGZyb20gJy4uLy4uLy4uL2xpYi9zdG9yYWdlJztcclxuY29uc3Qgbm9kZW1haWxlciA9IHJlcXVpcmUoJ25vZGVtYWlsZXInKTtcclxuXHJcbi8vIExvYWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZvciBsb2NhbCBkZXZlbG9wbWVudFxyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gIHJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZVRva2VuKCkge1xyXG4gIHJldHVybiBjcnlwdG8ucmFuZG9tQnl0ZXMoMzIpLnRvU3RyaW5nKCdoZXgnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGVyZm9ybURyYXcocGFydGljaXBhbnRzKSB7XHJcbiAgY29uc3QgbmFtZXMgPSBPYmplY3Qua2V5cyhwYXJ0aWNpcGFudHMpO1xyXG4gIGlmIChuYW1lcy5sZW5ndGggPCAyKSB0aHJvdyBuZXcgRXJyb3IoJ05lZWQgYXQgbGVhc3QgMiBwYXJ0aWNpcGFudHMnKTtcclxuXHJcbiAgbGV0IGF0dGVtcHRzID0gMDtcclxuICBjb25zdCBtYXhBdHRlbXB0cyA9IDEwMDA7XHJcbiAgd2hpbGUgKGF0dGVtcHRzIDwgbWF4QXR0ZW1wdHMpIHtcclxuICAgIGNvbnN0IGFzc2lnbm1lbnRzID0ge307XHJcbiAgICBjb25zdCBhdmFpbGFibGUgPSBbLi4ubmFtZXNdO1xyXG4gICAgbGV0IHZhbGlkID0gdHJ1ZTtcclxuICAgIGZvciAoY29uc3QgZ2l2ZXIgb2YgbmFtZXMpIHtcclxuICAgICAgY29uc3QgcG9zc2libGUgPSBhdmFpbGFibGUuZmlsdGVyKHIgPT4gciAhPT0gZ2l2ZXIpO1xyXG4gICAgICBpZiAocG9zc2libGUubGVuZ3RoID09PSAwKSB7IHZhbGlkID0gZmFsc2U7IGJyZWFrOyB9XHJcbiAgICAgIGNvbnN0IHJlY2lwaWVudCA9IHBvc3NpYmxlW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCldO1xyXG4gICAgICBhc3NpZ25tZW50c1tnaXZlcl0gPSByZWNpcGllbnQ7XHJcbiAgICAgIGF2YWlsYWJsZS5zcGxpY2UoYXZhaWxhYmxlLmluZGV4T2YocmVjaXBpZW50KSwgMSk7XHJcbiAgICB9XHJcbiAgICBpZiAodmFsaWQpIHJldHVybiBhc3NpZ25tZW50cztcclxuICAgIGF0dGVtcHRzKys7XHJcbiAgfVxyXG4gIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGdlbmVyYXRlIHZhbGlkIGFzc2lnbm1lbnRzJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVRyYW5zcG9ydGVyKCkge1xyXG4gIC8vIERlYnVnIGVudmlyb25tZW50IHZhcmlhYmxlc1xyXG4gIGNvbnNvbGUubG9nKCdFbWFpbCBjb25maWc6Jywge1xyXG4gICAgaG9zdDogcHJvY2Vzcy5lbnYuRU1BSUxfSE9TVCB8fCAnc210cC5nbWFpbC5jb20nLFxyXG4gICAgcG9ydDogcHJvY2Vzcy5lbnYuRU1BSUxfUE9SVCB8fCAnNTg3JyxcclxuICAgIHVzZXI6IHByb2Nlc3MuZW52LkVNQUlMX1VTRVIgPyAnKioqQCcgKyBwcm9jZXNzLmVudi5FTUFJTF9VU0VSLnNwbGl0KCdAJylbMV0gOiAndW5kZWZpbmVkJyxcclxuICAgIHBhc3M6IHByb2Nlc3MuZW52LkVNQUlMX1BBU1MgPyAnY29uZmlndXJlZCcgOiAnbWlzc2luZydcclxuICB9KTtcclxuXHJcbiAgY29uc3QgY29uZmlnID0ge1xyXG4gICAgaG9zdDogcHJvY2Vzcy5lbnYuRU1BSUxfSE9TVCB8fCAnc210cC5nbWFpbC5jb20nLFxyXG4gICAgcG9ydDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuRU1BSUxfUE9SVCkgfHwgNTg3LFxyXG4gICAgc2VjdXJlOiBmYWxzZSwgLy8gVXNlIFNUQVJUVExTIGZvciBwb3J0IDU4N1xyXG4gICAgYXV0aDoge1xyXG4gICAgICB1c2VyOiBwcm9jZXNzLmVudi5FTUFJTF9VU0VSLFxyXG4gICAgICBwYXNzOiBwcm9jZXNzLmVudi5FTUFJTF9QQVNTLFxyXG4gICAgfSxcclxuICAgIHRsczoge1xyXG4gICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlXHJcbiAgICB9LFxyXG4gICAgY29ubmVjdGlvblRpbWVvdXQ6IDYwMDAwLFxyXG4gICAgZ3JlZXRpbmdUaW1lb3V0OiAzMDAwMCxcclxuICAgIHNvY2tldFRpbWVvdXQ6IDYwMDAwXHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0ZXIoY29uZmlnKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcclxuICBjb25zdCB7IHBhcnRpY2lwYW50cyB9ID0gcmVxLmJvZHk7XHJcbiAgaWYgKCFwYXJ0aWNpcGFudHMgfHwgcGFydGljaXBhbnRzLmxlbmd0aCA8IDIpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTmVlZCBhdCBsZWFzdCAyIHBhcnRpY2lwYW50cycgfSk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudE1hcCA9IHt9O1xyXG4gICAgcGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XHJcbiAgICAgIGNvbnN0IHRva2VuID0gZ2VuZXJhdGVUb2tlbigpO1xyXG4gICAgICBwYXJ0aWNpcGFudE1hcFtwLm5hbWVdID0geyBlbWFpbDogcC5lbWFpbCwgdG9rZW4gfTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGFzc2lnbm1lbnRzID0gcGVyZm9ybURyYXcocGFydGljaXBhbnRNYXApO1xyXG5cclxuICAgIGNvbnN0IGRhdGEgPSB7IHBhcnRpY2lwYW50czogcGFydGljaXBhbnRNYXAsIGFzc2lnbm1lbnRzLCByZXZlYWxlZDoge30gfTtcclxuICAgIGF3YWl0IHNhdmVEYXRhKGRhdGEpO1xyXG5cclxuICAgIC8vIHNlbmQgZW1haWxzXHJcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IGNyZWF0ZVRyYW5zcG9ydGVyKCk7XHJcbiAgICBjb25zdCBhcHBVcmwgPSBwcm9jZXNzLmVudi5BUFBfVVJMIHx8ICcnO1xyXG4gICAgY29uc3QgcHJvbWlzZXMgPSBPYmplY3Qua2V5cyhwYXJ0aWNpcGFudE1hcCkubWFwKG5hbWUgPT4ge1xyXG4gICAgICBjb25zdCBwID0gcGFydGljaXBhbnRNYXBbbmFtZV07XHJcbiAgICAgIGNvbnN0IHJldmVhbFVybCA9IGAke2FwcFVybH0vcmV2ZWFsP3Rva2VuPSR7cC50b2tlbn1gO1xyXG4gICAgICBjb25zdCBtYWlsID0ge1xyXG4gICAgICAgIGZyb206IHByb2Nlc3MuZW52LkVNQUlMX1VTRVIsXHJcbiAgICAgICAgdG86IHAuZW1haWwsXHJcbiAgICAgICAgc3ViamVjdDogJ/CfjoUgWW91ciBTZWNyZXQgU2FudGEgQXNzaWdubWVudCcsXHJcbiAgICAgICAgaHRtbDogYDxwPkhpIDxzdHJvbmc+JHtuYW1lfTwvc3Ryb25nPiw8L3A+PHA+Q2xpY2sgPGEgaHJlZj1cIiR7cmV2ZWFsVXJsfVwiPnRoaXMgbGluazwvYT4gdG8gcmV2ZWFsIHlvdXIgU2VjcmV0IFNhbnRhLjwvcD5gXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiB0cmFuc3BvcnRlci5zZW5kTWFpbChtYWlsKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcclxuICAgIHJldHVybiByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IGBTZWNyZXQgU2FudGEgc2V0IHVwIGFuZCBlbWFpbHMgc2VudCAoJHtwYXJ0aWNpcGFudHMubGVuZ3RofSlgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcignc2V0dXAgZXJyb3InLCBlcnIpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVyci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiY3J5cHRvIiwibG9hZERhdGEiLCJzYXZlRGF0YSIsIm5vZGVtYWlsZXIiLCJyZXF1aXJlIiwicHJvY2VzcyIsImNvbmZpZyIsImdlbmVyYXRlVG9rZW4iLCJyYW5kb21CeXRlcyIsInRvU3RyaW5nIiwicGVyZm9ybURyYXciLCJwYXJ0aWNpcGFudHMiLCJuYW1lcyIsIk9iamVjdCIsImtleXMiLCJsZW5ndGgiLCJFcnJvciIsImF0dGVtcHRzIiwibWF4QXR0ZW1wdHMiLCJhc3NpZ25tZW50cyIsImF2YWlsYWJsZSIsInZhbGlkIiwiZ2l2ZXIiLCJwb3NzaWJsZSIsImZpbHRlciIsInIiLCJyZWNpcGllbnQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJzcGxpY2UiLCJpbmRleE9mIiwiY3JlYXRlVHJhbnNwb3J0ZXIiLCJjb25zb2xlIiwibG9nIiwiaG9zdCIsImVudiIsIkVNQUlMX0hPU1QiLCJwb3J0IiwiRU1BSUxfUE9SVCIsInVzZXIiLCJFTUFJTF9VU0VSIiwic3BsaXQiLCJwYXNzIiwiRU1BSUxfUEFTUyIsInBhcnNlSW50Iiwic2VjdXJlIiwiYXV0aCIsInRscyIsInJlamVjdFVuYXV0aG9yaXplZCIsImNvbm5lY3Rpb25UaW1lb3V0IiwiZ3JlZXRpbmdUaW1lb3V0Iiwic29ja2V0VGltZW91dCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJib2R5IiwicGFydGljaXBhbnRNYXAiLCJmb3JFYWNoIiwicCIsInRva2VuIiwibmFtZSIsImVtYWlsIiwiZGF0YSIsInJldmVhbGVkIiwidHJhbnNwb3J0ZXIiLCJhcHBVcmwiLCJBUFBfVVJMIiwicHJvbWlzZXMiLCJtYXAiLCJyZXZlYWxVcmwiLCJtYWlsIiwiZnJvbSIsInRvIiwic3ViamVjdCIsImh0bWwiLCJzZW5kTWFpbCIsIlByb21pc2UiLCJhbGwiLCJzdWNjZXNzIiwibWVzc2FnZSIsImVyciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/admin/setup.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fsetup&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Csetup.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();